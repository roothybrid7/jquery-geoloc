/*! jquery-geoloc - v0.0.0 - 2012-07-08
* Copyright (c) 2012 Satoshi Ohki; Licensed MIT, GPLv2 */
(function(a,b,c){function f(b){this.options=a.extend({},e,b),this._defaults=e,this._name=d,this._clearWatchId=null,this.init(b)}"use strict";var d="geoloc",e={};f.prototype={init:function(a){this.watchPosition(a)},watchPosition:function(a){this.clearWatch(),this._clearWatchId=navigator.geolocation.watchPosition(this.onSuccessWatchPosition,this.onErrorWatchPosition,a)},clearWatch:function(){var a=this._clearWatchId;a&&navigator.geolocation.clearWatch(a),this._clearWatchId=null},onSuccessWatchPosition:function(b){var c=jQuery.Event("success");c.position=b,a(navigator.geolocation).trigger(c,b)},onErrorWatchPosition:function(b){this.clearWatchPosition();var c=null;switch(b.code){case b.PERMISION_DENIED:c="denied";break;case b.POSITION_UNAVAILABLE:c="unavailable";break;case b.TIMEOUT:c="timeout";break;default:c="unknownerror"}var d=jQuery.Event(c);d.error=b,d.errorMessage=b.message,a(navigator.geolocation).trigger(d,b)}},a[d]={getCurrentPositionDeferred:function(b){var c=a.Deferred();return navigator.geolocation.getCurrentPosition(c.resolve,c.reject,b),c.promise()},watchPositionWithNotifying:function(a){return new f(a)}}})(jQuery,this);